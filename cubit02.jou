## 
## Trelis Version 14.0.5
## Trelis Build f9fcf83
## Revised Tue Oct 15 10:45:06 2013 -0600
## Running 12/25/2018 11:13:38 AM
## Command Options:
## -warning = On
## -information = On
# Journal file formatting, etc.
# ----------------------------------------------------------------------
# Set units to SI.
# ----------------------------------------------------------------------
${Units('si')}
# Reset geometry.
# ----------------------------------------------------------------------
reset
# ----------------------------------------------------------------------
# Create a cylinder.
# ----------------------------------------------------------------------
create cylinder height {60*km} radius {10*km}
${idVol1=Id('volume')}
# ----------------------------------------------------------------------
# Create planar interface.
# ----------------------------------------------------------------------
create planar surface zplane
${idInt=Id('surface')}
rotate surface {idInt} about y angle 70
rotate surface {idInt} about z angle -230
surface {idInt} move z {-5.700000*km}
# ----------------------------------------------------------------------
# Create planar free surface.
# ----------------------------------------------------------------------
create planar surface zplane
${idSur=Id('surface')}
# ----------------------------------------------------------------------
# Webcut blocks.
# ----------------------------------------------------------------------
webcut volume {idVol1} with sheet extended from surface {idSur}
${idVol2=Id('volume')}
webcut volume {idVol2} with sheet extended from surface {idInt}
${idVol3=Id('volume')}
# ----------------------------------------------------------------------
# Find and name the fault surface.
# ----------------------------------------------------------------------
find surface overlap volume {idVol2} {idVol3}
${idF1=GroupMemberId('surf_overlap','surface',0)}
${idF2=GroupMemberId('surf_overlap','surface',1)}
surface {idF1} name "fault1"
# ----------------------------------------------------------------------
# Create semi-sphere
# ----------------------------------------------------------------------
create sphere radius {100.000000 *km}
${idVol4=Id('volume')}
webcut volume {idVol4} with sheet extended from surface {idSur}
${idVol5=Id('volume')}
${idround=Id('surface')}
surface {idround} name "spheresurf"
# ----------------------------------------------------------------------
# Substract the semi-spehere from the blocks that contain the fault
# ----------------------------------------------------------------------
subtract volume {idVol2} {idVol3} from volume {idVol5} keep
${idVol6=Id('volume')}
# ----------------------------------------------------------------------
# Delete unused blocks and surfaces.
# ----------------------------------------------------------------------
delete surface all
delete volume {idVol1} {idVol4} {idVol5}
# ----------------------------------------------------------------------
# imprint and merge.
# ----------------------------------------------------------------------
imprint all
merge all
# ----------------------------------------------------------------------
# Generate the mesh.
# ----------------------------------------------------------------------
volume all scheme tetmesh
volume {idVol2} {idVol3} size {4.000000*km}
mesh volume {idVol2}
mesh volume {idVol3}
volume {idVol6} size {8.000000*km}
mesh volume {idVol6}
thex volume all
# ----------------------------------------------------------------------
# Smooth mesh to improve quality.
# ----------------------------------------------------------------------
set unmerge duplicate_mesh on
unmerge fault1 only
surface {idF2} name "fault2"
# ----------------------------------------------------------------------
# Seperate nodes on fault.
# ----------------------------------------------------------------------
set node constraint off
node in fault1 move normal to fault1 distance {-0.01*m}
node in fault2 move normal to fault2 distance {-0.01*m}
compress all
set node constraint on
# End of file
block 1 hex in volume 1
block 2 hex in volume 2
block 3 hex in volume 3
block 1000 face in surface 8
block 1000 name "face_abs"
block 1001 face in surface 2 5 7
block 1001 name "face_topo"
block 1 name "elastic 1"
block 1 attribute count 6
block 1 attribute index 1 1
block 1 attribute index 2 5770
block 1 attribute index 3 3330
block 1 attribute index 4 2705
block 1 attribute index 5 13
block 1 attribute index 6 0
block 2 name "elastic 2"
block 2 attribute count 6
block 2 attribute index 1 1
block 2 attribute index 2 5770
block 2 attribute index 3 3330
block 2 attribute index 4 2705
block 2 attribute index 5 13
block 2 attribute index 6 0
block 3 name "elastic 3"
block 3 attribute count 6
block 3 attribute index 1 1
block 3 attribute index 2 5770
block 3 attribute index 3 3330
block 3 attribute index 4 2705
block 3 attribute index 5 13
block 3 attribute index 6 0
delete group 240
delete group 241
delete group 242
delete group 243
delete group 244
delete group 245
delete group 246
delete group 247
delete group 248
delete group 249
delete group 250
delete group 251
delete group 252
delete group 253
delete group 254
delete group 255
delete group 256
delete group 257
delete group 258
delete group 259
delete group 260
delete group 261
delete group 262
delete group 263
delete group 264
delete group 265
delete group 266
delete group 267
delete group 268
delete group 269
delete group 270
delete group 271
delete group 272
delete group 273
delete group 274
delete group 275
delete group 276
delete group 277
delete group 278
delete group 279
delete group 280
delete group 281
delete group 282
delete group 283
delete group 284
delete group 285
delete group 286
delete group 287
delete group 288
delete group 289
delete group 290
delete group 291
delete group 292
delete group 293
delete group 294
delete group 295
delete group 296
delete group 297
delete group 298
delete group 299
delete group 300
delete group 301
delete group 302
delete group 303
delete group 304
delete group 305
delete group 306
delete group 307
delete group 308
delete group 309
delete group 310
delete group 311
delete group 312
delete group 313
delete group 314
delete group 315
delete group 316
delete group 317
delete group 318
delete group 319
delete group 320
delete group 321
delete group 322
delete group 323
delete group 324
delete group 325
delete group 326
delete group 327
delete group 328
delete group 329
delete group 330
delete group 331
delete group 332
delete group 333
delete group 334
delete group 335
delete group 336
delete group 337
delete group 338
delete group 339
delete group 340
delete group 341
delete group 342
delete group 343
delete group 344
delete group 345
delete group 346
delete group 347
delete group 348
delete group 349
delete group 350
delete group 351
delete group 352
delete group 353
delete group 354
delete group 355
delete group 356
delete group 357
delete group 358
delete group 359
delete group 360
delete group 361
delete group 362
delete group 363
delete group 364
delete group 365
delete group 366
delete group 367
delete group 368
delete group 369
delete group 370
delete group 371
delete group 372
delete group 373
delete group 374
delete group 375
delete group 376
delete group 377
delete group 378
delete group 379
delete group 380
delete group 381
delete group 382
delete group 383
delete group 384
delete group 385
delete group 386
delete group 387
delete group 388
delete group 389
delete group 390
delete group 391
delete group 392
delete group 393
delete group 394
delete group 395
delete group 396
delete group 397
delete group 398
delete group 399
delete group 400
delete group 401
delete group 402
delete group 403
delete group 404
delete group 405
delete group 406
delete group 407
delete group 408
delete group 409
delete group 410
delete group 411
delete group 412
delete group 413
delete group 414
delete group 415
delete group 416
delete group 417
delete group 418
delete group 419
delete group 420
delete group 421
delete group 422
delete group 423
delete group 424
delete group 425
delete group 426
delete group 427
delete group 428
delete group 429
delete group 430
delete group 431
delete group 432
delete group 433
delete group 434
delete group 435
delete group 436
delete group 437
delete group 438
delete group 439
delete group 440
delete group 441
delete group 442
delete group 443
delete group 444
delete group 445
delete group 446
delete group 447
delete group 448
delete group 449
delete group 450
delete group 451
delete group 452
delete group 453
delete group 454
delete group 455
delete group 456
delete group 457
delete group 458
delete group 459
delete group 460
delete group 461
delete group 462
delete group 463
delete group 464
delete group 465
delete group 466
delete group 467
delete group 468
delete group 469
delete group 470
delete group 471
delete group 472
delete group 473
delete group 474
delete group 475
delete group 476
compress all
set info off
set echo off
